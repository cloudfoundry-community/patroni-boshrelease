---
name: integration-test
packages: [jq, postgresql-9.4, cf-cli]
templates:
  bin/run: bin/run
  bin/cf-create-service: bin/cf-create-service
  bin/test-storage: bin/test-storage
  bin/test-clone-from-latest-by-name: bin/test-clone-from-latest-by-name
  helpers/ctl_setup.sh: helpers/ctl_setup.sh
  helpers/ctl_utils.sh: helpers/ctl_utils.sh
  helpers/test_helpers.sh: helpers/test_helpers.sh

consumes:
- name: servicebroker
  type: servicebroker
  optional: true

properties:
  cf.integration_test.organization:
    description: Organization to use for Cloud Foundry integration test
    default: system
  cf.integration_test.space:
    description: Organization to use for Cloud Foundry integration test
    default: dingo-postgresql-integration-test
  cf.integration_test.service_name:
    description: Service name to use for Cloud Foundry integration test
    default: dingo-postgresql

  cf.api_url:
    description: (if not using links) URI for Cloud Foundry API to allow lookup of user-provided service names after provisioning
  cf.username:
    description: (if not using links) Username for Cloud Foundry API access allow lookup of user-provided service names after provisioning
  cf.password:
    description: (if not using links) Username for Cloud Foundry API access allow lookup of user-provided service names after provisioning
  cf.skip_ssl_validation:
    description: (if not using links) Set to true if Cloud Foundry API is using self-signed SSL certificate
    default: false
