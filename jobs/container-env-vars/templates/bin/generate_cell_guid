#!/bin/bash

set -e # exit immediately if a simple command exits with a non-zero status
set -u # report the usage of uninitialized variables

env_var_path=$1
if [[ -z "$env_var_path" ]]; then
  echo "USAGE: generate_node_uuid /var/vcap/store/cf-containers-broker/direnv/cell_guid"
  exit 1
fi
mkdir -p $(dirname $env_var_path)
cat /proc/sys/kernel/random/uuid >> ${env_var_path}
