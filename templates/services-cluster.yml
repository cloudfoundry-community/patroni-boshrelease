---
meta:
  docker_image:
    image: "dingotiles/dingo-postgresql95"
    tag: "edge"

  broker:
    services:
      - id: 'beb5973c-e1b2-11e5-a736-c7c0b526363d'
        name: 'dingo-postgresql'
        description: 'High-availability cluster of PostgreSQL 9.5'
        bindable: true
        tags: [postgresql95, postgresql]
        metadata:
          displayName: 'Dingo PostgreSQL'
          longDescription: 'High-availability cluster of PostgreSQL 9.5'
          providerDisplayName: 'Dingo Tiles'
          documentationUrl: 'https://pg.dingotiles.com'
          supportUrl: 'https://slack.dingotiles.com'
        plans:
          - id: '1545e30e-6dc3-11e5-826a-6c4008a663f0'
            name: 'cluster-dev'
            free: true
            description: 'High-availability cluster of PostgreSQL'
            metadata:
              displayName: 'Cluster (dev only)'
            container:
              backend: 'docker'
              image: (( grab meta.docker_image.image ))
              tag: "(( grab meta.docker_image.tag ))"
              persistent_volumes:
                - '/data'
              environment:
                - (( concat "ETCD_HOST_PORT=" meta.etcd.host ":4001" ))
